(function(a,f,c){var i=["table","thead","tbody","tfoot","tr","col","colgroup","object","embed","param","ol","ul","dl","blockquote","select","optgroup","option","textarea","script","style"];function g(j,k){if(j.innerText){j.innerText=k}else{if(j.nodeValue){j.nodeValue=k}else{if(j.textContent){j.textContent=k}else{return false}}}}function d(k,j,m,n){var p=k.parent();var q;k.remove();var l=m?m.length:0;if(p.contents().length>l){q=p.contents().eq(-1-l);return b(q,j,m,n)}else{var o=p.prev();q=o.contents().eq(-1);if(q.length){g(q[0],q.text()+n.ellipsis);p.remove();if(m.length){o.append(m)}return true}}return false}function b(s,r,n,t){var l=s[0];var j=s.text();var m="";var q,p;var o=0;var k=j.length;while(o<=k){q=o+((k-o)>>1);p=f.trim(j.substr(0,q+1))+t.ellipsis;g(l,p);if(r.height()>t.maxHeight){k=q-1}else{o=q+1;m=m.length>p.length?m:p}}if(m.length>0){g(l,m);return true}else{return d(s,r,n,t)}}function e(s,r,o,t){var m=s[0];var q=s.contents();var j,l;var n=0;var k=q.length;var p=false;s.empty();for(;n<k&&!p;n++){j=q.eq(n);l=j[0];if(l.nodeType===8){continue}m.appendChild(l);if(o.length){if(f.inArray(m.tagName.toLowerCase(),i)>=0){s.after(o)}else{s.append(o)}}if(r.height()>t.maxHeight){if(l.nodeType===3){p=b(j,r,o,t)}else{p=e(j,r,o,t)}}if(!p&&o.length){o.remove()}}return p}function h(k,j){this.element=k;this.$element=f(k);this._name="truncate";this._defaults={lines:1,ellipsis:"â€¦",showMore:"",showLess:""};this.options=f.extend({},this._defaults,j);if(this.options.maxHeight===c){this.options.maxHeight=parseInt(this.options.lines,10)*parseInt(this.options.lineHeight,10)}this.$clipNode=f(f.parseHTML(this.options.showMore),this.$element);this.original=this.cached=k.innerHTML;this.isTruncated=false;this.isCollapsed=true;this.update()}h.prototype={update:function(l){var k=!this.isCollapsed;if(l){this.original=this.element.innerHTML=l}else{if(this.isCollapsed&&this.element.innerHTML===this.cached){this.element.innerHTML=this.original}}var j=this.$element.wrapInner("<div/>").children();j.css({border:"none",margin:0,padding:0,width:"auto",height:"auto"});this.isTruncated=false;if(j.height()>this.options.maxHeight){this.isTruncated=e(j,j,this.$clipNode,this.options)}else{this.isCollapsed=false}j.replaceWith(j.contents());this.cached=this.element.innerHTML;if(k){this.element.innerHTML=this.original}},expand:function(){if(!this.isCollapsed){return}this.isCollapsed=false;this.element.innerHTML=this.isTruncated?this.original+this.options.showLess:this.original},collapse:function(j){if(this.isCollapsed){return}this.isCollapsed=true;j=j||false;if(j){this.update()}else{this.element.innerHTML=this.cached}}};f.fn.truncate=function(k){var j=f.makeArray(arguments).slice(1);return this.each(function(){var l=f.data(this,"jquery-truncate");if(!l){f.data(this,"jquery-truncate",new h(this,k))}else{if(typeof l[k]==="function"){l[k].apply(l,j)}}})};a.Truncate=h})(this,jQuery);